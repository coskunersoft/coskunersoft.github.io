<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram WebApp Test</title>
    <script src="https://telegram.org/js/telegram-web-app.js?59"></script>
</head>
<body>
    <h1>Telegram WebApp Test</h1>
    <button id="sendBtn">Veriyi G�nder</button>

    <div id="log"></div>

    <script>
    const log = (msg) => {
            const div = document.createElement("div");
            div.textContent = msg;
            document.getElementById("log").appendChild(div);
            console.log(msg);
        }

        const sendData = () => {
            const data = {
                action: "buy",
                product: "sword"
            };

            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.sendData(JSON.stringify(data));
                log("Veri g�nderildi: " + JSON.stringify(data));
            } else {
                log("Telegram WebApp bulunamad�!");
            }
        }

        document.getElementById("sendBtn").addEventListener("click", sendData);

        // WebApp haz�r olunca loglayal�m
        window.addEventListener("DOMContentLoaded", () => {
            if (window.Telegram && Telegram.WebApp) {
                log("Telegram WebApp haz�r!");
            } else {
                log("Telegram WebApp hen�z haz�r de�il!");
            }
        });</script>

    <script>
        Telegram.WebApp.ready();

        const user = Telegram.WebApp.initDataUnsafe.user;
        if (user) {
            console.log("Kullanıcı adı:", user.first_name);
            console.log("Kullanıcı id:", user.id);

            if (user.photo_url) {
                // Profil fotoğrafı varsa göster
                const img = document.createElement('img');
                img.src = user.photo_url;
                img.style.width = "100px";
                img.style.height = "100px";
                document.body.appendChild(img);
            } else {
                console.log("Kullanıcının profil fotoğrafı yok.");
            }
        }
    </script>
</body>
</html>
